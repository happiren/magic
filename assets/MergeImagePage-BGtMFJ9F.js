import"./request-DanhXGOG.js";import{k as B,r as d,d as g,c as m,j as e,l as P,v as F,m as $,F as D,n as E,b as N,o as R,e as q}from"./index-cHsVPmZ3.js";const H={class:"container mx-auto px-4 py-8 max-w-4xl"},S={class:"bg-white shadow-lg rounded-lg p-6"},U={class:"grid md:grid-cols-2 gap-6 items-center mb-6"},A={class:"space-y-4"},O={class:"flex items-center space-x-4"},T={class:"space-y-2"},W={class:"grid grid-cols-4 sm:grid-cols-6 gap-2 max-h-48 overflow-y-auto"},G=["src"],J=["onClick"],K={class:"flex justify-center mb-6"},Q=["disabled"],X={key:0,class:"text-center"},Y={class:"flex flex-col items-center"},Z=["src"],ee=B({__name:"MergeImages",setup(w){const p=d(null),l=d([]),h=d("2x2"),r=d(null);function _(){var o;(o=p.value)==null||o.click()}function b(o){const n=o.target.files;if(n)for(let s=0;s<n.length;s++){const a=n[s],i=new FileReader;i.onload=c=>{var u;l.value.push({file:a,url:(u=c.target)==null?void 0:u.result})},i.readAsDataURL(a)}}function k(o){l.value.splice(o,1)}async function y(){const o=C();if(l.value.length<o){alert(`请选择至少 ${o} 张图片`);return}const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)return;const s=I();t.width=s.width,t.height=s.height;const a=l.value.slice(0,o).map(j),i=await Promise.all(a);z(n,i,s),r.value=t.toDataURL("image/jpeg")}function C(){return{"2x2":4,"3x3":9,"4x4":16,"2x1-h":2,"2x1-v":2}[h.value]||4}function I(){const o={"2x2":{width:1e3,height:1e3,rows:2,cols:2},"3x3":{width:1200,height:1200,rows:3,cols:3},"4x4":{width:1600,height:1600,rows:4,cols:4},"2x1-h":{width:1200,height:600,rows:1,cols:2},"2x1-v":{width:600,height:1200,rows:2,cols:1}};return o[h.value]||o["2x2"]}function j(o){return new Promise((t,n)=>{const s=new Image;s.onload=()=>t(s),s.onerror=n,s.src=o.url})}function z(o,t,n){const{width:s,height:a,rows:i,cols:c}=n,u=s/c,x=a/i;t.forEach((v,f)=>{const L=Math.floor(f/c),V=f%c;o.drawImage(v,0,0,v.width,v.height,V*u,L*x,u,x)})}function M(){if(!r.value)return;const o=document.createElement("a");o.href=r.value,o.download=`puzzle_${new Date().getTime()}.jpg`,o.click()}return(o,t)=>(g(),m("div",H,[e("div",S,[t[7]||(t[7]=e("h2",{class:"text-2xl font-bold text-gray-800 mb-6 text-center"}," 图片拼图生成器 ",-1)),e("div",U,[e("div",A,[e("div",O,[e("input",{type:"file",ref_key:"fileInput",ref:p,multiple:"",accept:"image/*",onChange:b,class:"hidden"},null,544),e("button",{onClick:_,class:"flex-grow btn btn-primary flex items-center justify-center space-x-2"},t[1]||(t[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("span",null,"选择图片",-1)]))]),e("div",T,[t[3]||(t[3]=e("label",{class:"block text-sm font-medium text-gray-700"},"选择拼图布局",-1)),P(e("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>h.value=n),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},t[2]||(t[2]=[$('<option value="2x2">2x2 网格</option><option value="3x3">3x3 网格</option><option value="4x4">4x4 网格</option><option value="2x1-h">2x1 横向</option><option value="2x1-v">2x1 纵向</option>',5)]),512),[[F,h.value]])])]),e("div",W,[(g(!0),m(D,null,E(l.value,(n,s)=>(g(),m("div",{key:s,class:"relative group"},[e("img",{src:n.url,class:"w-full aspect-square object-cover rounded-md transition-transform group-hover:scale-105"},null,8,G),e("button",{onClick:a=>k(s),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"}," ✕ ",8,J)]))),128))])]),e("div",K,[e("button",{onClick:y,disabled:l.value.length===0,class:"btn btn-success flex items-center space-x-2 disabled:opacity-50"},t[4]||(t[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("span",null,"生成拼图",-1)]),8,Q)]),r.value?(g(),m("div",X,[t[6]||(t[6]=e("h3",{class:"text-xl font-semibold text-gray-700 mb-4"},"生成的拼图",-1)),e("div",Y,[e("img",{src:r.value,class:"max-w-full rounded-lg shadow-lg mb-4"},null,8,Z),e("button",{onClick:M,class:"btn btn-accent flex items-center space-x-2"},t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),e("span",null,"下载拼图",-1)]))])])):N("",!0)])]))}}),te={class:"home-page"},ne={__name:"MergeImagePage",setup(w){return d(""),R(()=>{}),(p,l)=>(g(),m("div",te,[q(ee)]))}};export{ne as default};
